{% extends "base.html" %}
{% block title %}Koan — Missions{% endblock %}
{% block content %}
<h1>Missions</h1>

<div class="card">
    <h2 style="margin-bottom:0.5rem;">Nouvelle mission</h2>
    <form method="POST" action="/missions/add">
        <input type="text" name="mission" placeholder="Description de la mission..." required>
        <div class="form-row">
            <input type="text" name="project" placeholder="Projet (optionnel)" style="max-width:200px;">
            <button type="submit">Ajouter</button>
        </div>
    </form>
</div>

{% if missions.in_progress %}
<h2>En cours</h2>
{% for m in missions.in_progress %}
<div class="card">
    <pre>{{ m }}</pre>
</div>
{% endfor %}
{% endif %}

{% if missions.pending %}
<h2>En attente ({{ missions.pending|length }})</h2>
{% for m in missions.pending %}
<div class="card">
    <div class="mission-item">{{ m }}</div>
</div>
{% endfor %}
{% endif %}

{% if missions.done %}
<h2>Terminées ({{ missions.done|length }})</h2>
<div class="card">
{% for m in missions.done[:20] %}
    <div class="mission-item" style="color: var(--text-muted);">{{ m }}</div>
{% endfor %}
{% if missions.done|length > 20 %}
    <div class="mission-item" style="color: var(--text-muted); font-style: italic;">
        ... et {{ missions.done|length - 20 }} autres
    </div>
{% endif %}
</div>
{% endif %}
{% endblock %}
